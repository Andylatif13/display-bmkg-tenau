<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>DISPLAY BMKG MARITIM TENAU</title>
  <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@400;700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg:#021427;
      --card:rgba(255,255,255,0.04);
      --accent:#6366f1;
    }
    * { box-sizing:border-box; }

    html,body {
      height:100%;
      margin:0;
      font-family:Poppins, sans-serif;
      background:linear-gradient(#021026,#041028);
      color:#fff;
      overflow:hidden;
    }

    header {
      position:fixed;
      top:0; left:0; right:0;
      height:70px;
      display:flex;
      align-items:center;
      justify-content:center;
      z-index:60;
      background:linear-gradient(180deg, rgba(2,6,23,0.75), rgba(2,6,23,0.35));
      backdrop-filter:blur(6px);
    }
    .title {
      font-family:Merriweather,serif;
      font-size:clamp(18px,2vw,20px);
      font-weight:700;
      text-align:center;
    }
    .time {
      position:fixed;
      top:10px;
      right:20px;
      font-size:clamp(14px,1.5vw,14px);
      z-index:70;
      text-align:right;
    }

    .viewport {
      position:fixed;
      top:70px;
      left:0; right:0; bottom:0;
      overflow:hidden;
    }

    .sections {
      position:relative;
      width:100%;
      height:100%;
      transition:transform 700ms cubic-bezier(.2,.9,.3,1);
    }

    section.display-section {
      width:100%;
      height:100%;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      padding:1vw;
    }

    .section-title {
      font-family:Merriweather,serif;
      font-size:clamp(18px,2vw,18px);
      margin-bottom:1vh;
      text-align:center;
    }

    .media-box {
      width:100%;
      height:calc(100vh - 110px);
      border-radius:14px;
      background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      overflow:hidden;
      display:flex;
      align-items:center;
      justify-content:center;
      box-shadow:0 20px 40px rgba(0,0,0,0.6);
    }
    .media-box img, .media-box video {
      width:100%;
      height:100%;
      object-fit:contain;
      display:block;
    }

    .progress {
      position:fixed;
      left:0; top:70px;
      height:4px;
      width:100%;
      background:rgba(255,255,255,0.1);
      z-index:65;
    }
    .progress > i {
      display:block;
      height:100%;
      width:0%;
      background:linear-gradient(90deg,var(--accent), #6ee7b7);
      transition:width linear;
    }

    @media(max-width:768px) {
      .title { font-size:20px; }
      .section-title { font-size:18px; }
      .media-box { height:calc(100vh - 100px); }
    }

    @media(max-width:480px) {
      .title { font-size:16px; }
      .section-title { font-size:16px; }
      .time { font-size:12px; right:10px; }
      .media-box { height:calc(100vh - 90px); }
    }
  </style>
</head>
<body>
  <header>
    <div class="title">DISPLAY BMKG MARITIM TENAU</div>
    <div class="time" id="clock">-- --- ---- · --:--:-- WITA</div>
  </header>

  <div class="progress"><i id="progressBar"></i></div>

  <div class="viewport">
    <div class="sections" id="sections">

      <!-- SLIDES -->
      <section class="display-section" data-type="img" data-src="media/image1.jpg">
        <div class="media-box"><img src="media/image1.jpg" alt="image1" loading="lazy" /></div>
      </section>

      <section class="display-section" data-type="img" data-src="media/image2.jpg">
        <div class="media-box"><img src="media/image2.jpg" alt="image2" loading="lazy" /></div>
      </section>

      <section class="display-section" data-type="video" data-src="media/video1.mp4">
        <div class="media-box"><video src="media/video1.mp4" muted playsinline preload="metadata"></video></div>
      </section>
      
      <section class="display-section" data-type="png" data-src="https://www.tide-forecast.com/system/charts-png/Kupang/tides.png">
        <div class="section-title">Pasang Surut Wilayah Kupang</div>
        <div class="media-box"><img src="https://www.tide-forecast.com/system/charts-png/Kupang/tides.png" alt="tides"/></div>
      </section>
      
      <section class="display-section" data-type="img" data-src="media/image3.jpg">
        <div class="media-box"><img src="media/image3.jpg" alt="image3" loading="lazy"/></div>
      </section>

      <section class="display-section" data-type="img" data-src="media/image4.jpg">
        <div class="media-box"><img src="media/image4.jpg" alt="image4" loading="lazy"/></div>
      </section>

      <section class="display-section" data-type="img" data-src="media/image5.jpg">
        <div class="media-box"><img src="media/image5.jpg" alt="image5" loading="lazy"/></div>
      </section>

      <section class="display-section" data-type="img" data-src="media/image6.jpg">
        <div class="media-box"><img src="media/image6.jpg" alt="image6" loading="lazy"/></div>
      </section>

      <section class="display-section" data-type="img" data-src="media/image7.jpg">
        <div class="media-box"><img src="media/image7.jpg" alt="image7" loading="lazy"/></div>
      </section>

      <section class="display-section" data-type="img" data-src="media/image8.jpg">
        <div class="media-box"><img src="media/image8.jpg" alt="image8" loading="lazy"/></div>
      </section>

      <!-- BMKG DATA GIF -->
      <section class="display-section" data-type="gif" data-src="https://peta-maritim.bmkg.go.id/render-static/w3g/2025/10/2025101500/kupang/mwh.gif">
        <div class="section-title">Tinggi & Arah Gelombang Maksimum Wilayah NTT</div>
        <div class="media-box"><img src="https://peta-maritim.bmkg.go.id/render-static/w3g/2025/10/2025101500/kupang/mwh.gif" alt="mwh"/></div>
      </section>

      <section class="display-section" data-type="gif" data-src="https://peta-maritim.bmkg.go.id/render-static/inaflows/2025/10/2025101412/kupang/s_0.gif">
        <div class="section-title">Tingkat Kandungan Garam Wilayah NTT</div>
        <div class="media-box"><img src="https://peta-maritim.bmkg.go.id/render-static/inaflows/2025/10/2025101412/kupang/s_0.gif" alt="s_0"/></div>
      </section>

      <section class="display-section" data-type="gif" data-src="https://peta-maritim.bmkg.go.id/render-static/inaflows/2025/10/2025101412/kupang/sl_0.gif">
        <div class="section-title">Tinggi Sea Level Wilayah NTT</div>
        <div class="media-box"><img src="https://peta-maritim.bmkg.go.id/render-static/inaflows/2025/10/2025101412/kupang/sl_0.gif" alt="sl_0"/></div>
      </section>

      <section class="display-section" data-type="gif" data-src="https://peta-maritim.bmkg.go.id/render-static/inaflows/2025/10/2025101500/kupang/csd_0.gif">
        <div class="section-title">Kecepatan & Arah Arus Wilayah NTT</div>
        <div class="media-box"><img src="https://peta-maritim.bmkg.go.id/render-static/inaflows/2025/10/2025101500/kupang/csd_0.gif" alt="csd_0"/></div>
      </section>

      <section class="display-section" data-type="gif" data-src="https://peta-maritim.bmkg.go.id/render-static/inaflows/2025/10/2025101500/kupang/st_0.gif">
        <div class="section-title">Temperatur Laut Wilayah NTT</div>
        <div class="media-box"><img src="https://peta-maritim.bmkg.go.id/render-static/inaflows/2025/10/2025101500/kupang/st_0.gif" alt="st_0"/></div>
      </section>

      <section class="display-section" data-type="gif" data-src="https://peta-maritim.bmkg.go.id/render-static/w3g/2025/10/2025101500/kupang/swh.gif">
        <div class="section-title">Tinggi & Arah Gelombang Signifikan Wilayah NTT</div>
        <div class="media-box"><img src="https://peta-maritim.bmkg.go.id/render-static/w3g/2025/10/2025101500/kupang/swh.gif" alt="swh"/></div>
      </section>

      <section class="display-section" data-type="gif" data-src="https://peta-maritim.bmkg.go.id/render-static/w3g/2025/10/2025101500/kupang/ws.gif">
        <div class="section-title">Arah & Kecepatan Angin Wilayah NTT</div>
        <div class="media-box"><img src="https://peta-maritim.bmkg.go.id/render-static/w3g/2025/10/2025101500/kupang/ws.gif" alt="ws"/></div>
      </section>

    </div>
  </div>

  <script>
    // === Clock (Tanggal dulu, lalu jam) ===
    const clockEl = document.getElementById('clock');
    function updateClock(){
      try {
        const now = new Date();
        const optsTime = { hour:'2-digit', minute:'2-digit', second:'2-digit', hour12:false, timeZone:'Asia/Makassar' };
        const optsDate = { day:'2-digit', month:'short', year:'numeric', timeZone:'Asia/Makassar' };
        const timeStr = new Intl.DateTimeFormat('id-ID', optsTime).format(now);
        const dateStr = new Intl.DateTimeFormat('id-ID', optsDate).format(now);
        clockEl.textContent = `${dateStr} · ${timeStr} WITA`;
      } catch(e) {
        clockEl.textContent = new Date().toLocaleString('id-ID') + ' WITA';
      }
    }
    updateClock();
    setInterval(updateClock,1000);

    // === Slideshow ===
    const sectionsEl = document.getElementById('sections');
    const sections = Array.from(document.querySelectorAll('.display-section'));
    const INTERVAL = 6000;
    let index = 0, intervalId = null, progressStart = null;
    const progressBar = document.getElementById('progressBar');

    function updateTransform(){
      const viewportHeight = window.innerHeight - 70;
      const translateY = -index * viewportHeight;
      sectionsEl.style.transform = `translateY(${translateY}px)`;
      sections.forEach((s,i)=> s.classList.toggle('active', i===index));
      sections.forEach((s,i)=>{
        const v = s.querySelector('video');
        if(v){
          if(i===index){ v.muted=true; v.play().catch(()=>{}); }
          else { try{ v.pause(); v.currentTime = 0; }catch(e){} }
        }
      });
    }

    function showIndex(i){
      index = (i + sections.length) % sections.length;
      updateTransform(); resetProgress();
    }

    function startAuto(){
      if(intervalId) return;
      intervalId = setInterval(()=> showIndex(index+1), INTERVAL);
      progressStart = performance.now();
      requestAnimationFrame(stepProgress);
    }

    function stopAuto(){
      if(intervalId){ clearInterval(intervalId); intervalId=null; }
    }

    function resetProgress(){
      progressBar.style.width='0%';
      progressStart = performance.now();
    }

    function stepProgress(ts){
      if(!progressStart) progressStart = ts;
      const elapsed = ts - progressStart;
      const pct = Math.min(100, (elapsed/INTERVAL)*100);
      progressBar.style.width = pct + '%';
      if(intervalId) requestAnimationFrame(stepProgress);
    }

    document.addEventListener('mouseover', stopAuto);
    document.addEventListener('mouseout', startAuto);
    window.addEventListener('blur', stopAuto);
    window.addEventListener('focus', startAuto);

    document.addEventListener('keydown', e=>{
      if(e.key==='ArrowDown'){ stopAuto(); showIndex(index+1);}
      else if(e.key==='ArrowUp'){ stopAuto(); showIndex(index-1);}
      else if(e.key===' '){ e.preventDefault(); if(intervalId) stopAuto(); else startAuto(); }
    });

    window.addEventListener('resize', updateTransform);

    updateTransform(); startAuto();

    sections.forEach(s=>{
      const src = s.dataset.src;
      if(src){
        if(src.endsWith('.mp4')){
          const v=document.createElement('video');
          v.src=src; v.preload='metadata';
        } else {
          const i=new Image(); i.src=src;
        }
      }
    });

    document.body.tabIndex = 0;
  </script>
</body>
</html>
